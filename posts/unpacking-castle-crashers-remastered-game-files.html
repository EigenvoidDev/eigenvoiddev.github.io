<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-E7GC202X7V"></script>
      <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());
         
         gtag('config', 'G-E7GC202X7V');
      </script>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Unpacking Castle Crashers Remastered Game Files - Eigenvoid</title>
      <meta name="description" content="Learn how to unpack Castle Crashers Remastered's game files.">
      <!-- Canonical URL -->
      <link rel="canonical" href="https://www.eigenvoid.dev/posts/unpacking-castle-crashers-remastered-game-files">
      <!-- Open Graph Meta Tags -->
      <meta property="og:title" content="Unpacking Castle Crashers Remastered Game Files - Eigenvoid">
      <meta property="og:type" content="article">
      <meta property="og:image" content="https://www.eigenvoid.dev/img/og/favicon-1200x630.png">
      <meta property="og:url" content="https://www.eigenvoid.dev/posts/unpacking-castle-crashers-remastered-game-files">
      <meta property="og:description" content="Learn how to unpack Castle Crashers Remastered's game files.">
      <meta property="og:locale" content="en_US">
      <meta property="og:site_name" content="Eigenvoid">
      <!-- Twitter Card Meta Tags -->
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:description" content="Learn how to unpack Castle Crashers Remastered's game files.">
      <meta name="twitter:title" content="Unpacking Castle Crashers Remastered Game Files - Eigenvoid">
      <meta name="twitter:image" content="https://www.eigenvoid.dev/img/twitter/favicon-1200x670.png">
      <!-- Apple Touch Icon -->
      <link rel="apple-touch-icon" sizes="180x180" href="../img/apple-touch-icon.png">
      <!-- Favicons -->
      <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="../img/favicon-16x16.png">
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="../css/bootstrap.min.css">
      <!-- Custom CSS -->
      <link rel="stylesheet" href="../css/main.css">
      <!-- Google Fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
      <!-- Font Awesome CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer">
   </head>
   <body>
      <div class="wrapper">
         <!-- Navbar -->
         <nav class="navbar navbar-expand-md navbar-dark">
            <div class="container d-flex justify-content-between">
               <!-- Brand Name -->
               <a class="nav-link brand-name" href="../">Eigenvoid</a>
               <!-- Navbar Toggler Button -->
               <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
               <span class="navbar-toggler-icon"></span>
               </button>
               <!-- Navbar Items -->
               <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="navbar-nav ms-auto">
                     <li class="nav-item">
                        <a class="nav-link" href="../">Posts</a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link" href="../projects">Projects</a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link" href="https://discord.com/users/1310056373136003102"><i class="fab fa-discord"></i></a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link" href="https://github.com/EigenvoidDev"><i class="fab fa-github"></i></a>
                     </li>
                  </ul>
               </div>
            </div>
         </nav>
         <!-- Main Content -->
         <div class="container main-content">
            <h4>Unpacking Castle Crashers Remastered Game Files</h4>
            <div class="post-dates">
               <p class="post-date">September 1, 2024</p>
            </div>
            <hr>
            <h5>Disclaimer</h5>
            <p>The information included in this post is for educational purposes only. Any material on this webpage may not be reproduced, retransmitted, or redisplayed other than for personal or educational use.</p>
            <h5>Introduction</h5>
            <p>File signatures, also known as "magic numbers", are crucial for file identification and analysis. These unique sequences of bytes are located at the beginning of a file and are typically represented as hexadecimal values. The hex signature for Castle Crashers Remastered's game files is <code>50 4B 03 04</code> (ASCII: PK..), the version is <code>14 00</code> = <code>0x14</code> = 20 â†’ 2.0, the data is not encrypted, and the data is not compressed. The "trailer", also known as the file footer, for these files is <i>filename</i> <code>50 4B</code> <i>17 characters</i> <code>00 00 00</code></i>, where a character is defined as a byte. Using this information, it can be determined that the file format for Castle Crashers Remastered's game files is the PKZIP archive file. When unzipped, they resolve into .COK6.NREC files. You can learn more about PKZIP archive files <a href="https://petlibrary.tripod.com/ZIP.HTM">here</a>.</p>
            <h5>Instructions</h5>
            <p>The following is a list of instructions required to unpack Castle Crashers Remastered's game files:</p>
            <p>1. Visit <a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a> and left-click on the appropriate download link.</p>
            <p>2. Head to the location of the completed download and run the Python Setup for whichever version of Python you downloaded. Ensure that you have "Add python.exe to PATH" checked. Left-click on "Install Now".</p>
            <p>3. Visit <a href="https://pypi.org/project/blowfish/#files">https://pypi.org/project/blowfish/#files</a> and left-click on "blowfish-0.6.1.tar.gz".</p>
            <p>4. Head to the location of the completed download and extract the contents of the compressed (zipped) folder "blowfish-0.6.1.tar" into the directory of your choice.</p>
            <p>5. Visit <a href="https://github.com/ethteck/castlecrashers/blob/main/decrypt_asset.py">this</a> URL and left-click on the "Download raw file" icon. Save the Python script into the directory of your choice.</p>
            <p>6. Visit <a href="https://github.com/jindrapetrik/jpexs-decompiler/releases">https://github.com/jindrapetrik/jpexs-decompiler/releases</a> and left-click on the appropriate download link.</p>
            <p>7. Head to the location of the completed download and run the JPEXS FFDec Setup for whichever version of JPEXS Free Flash Decompiler you downloaded. Install JPEXS Free Flash Decompiler.</p>
            <p>8. Create a new folder. Drag both "blowfish.py" (in the "blowfish-0.6.1.tar" folder from steps 3 and 4) and "decrypt_asset.py" (from step 5) into this folder.</p>
            <p>9. Create two new folders (one to hold .pak files and another to store the output of any commands concerning the .pak files) within the new folder that you created in step 8. You can name them whatever you want, but I chose to name them "paks" and "unpak".</p>
            <p>10. Head to the location of Castle Crashers Remastered's local files and copy all the .pak files from the "\data\game" subdirectory. Paste these files into the "paks" folder that you created in step 9.</p>
            <p>11. Return to the directory that contains both "blowfish.py" and "decrypt_asset.py". Clear the File Explorer address bar, type "cmd" into it, and press the "Enter" key to open Command Prompt in that directory.</p>
            <p>12. You will need to type the following into Command Prompt in order to unpack a particular .pak file:</p>
            <pre>python decrypt_asset.py &lt;paks folder&gt;/&lt;filename&gt;.pak &lt;output folder&gt;</pre>
            <p>13. For example, to unpack "main.pak", you would type the following into Command Prompt and press the "Enter" key:</p>
            <pre>python decrypt_asset.py paks/main.pak unpak</pre>
            <p>14. After you do this, you will see that both "MAIN.swf" and "MAIN.swf.raw" were generated in the "unpak" folder. "MAIN.swf.raw" is not significant, so you may delete it. This leaves only "MAIN.swf".</p>
            <p>15. You can now use JPEXS Free Flash Decompiler to open and read "MAIN.swf".</p>
            <h5>Additional Resources</h5>
            <p>Visit <a href="https://drive.google.com/drive/folders/19X-h5Ye7ELKcTeBY_yY0t5Xg57cO9wQK">this</a> URL to access modding resources for Castle Crashers.</p>
         </div>
      </div>
      <!-- Footer -->
      <footer class="footer">
         <p>
            Copyright &copy;
            <script type="text/javascript">
               document.write(new Date().getFullYear());
            </script>
            Eigenvoid. All rights reserved.
         </p>
      </footer>
      <!-- JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="../js/jquery-3.7.1.min.js"></script>
      <script src="../js/popper.min.js"></script>
      <script src="../js/bootstrap.min.js"></script>
   </body>
</html>